\documentclass[12pt]{extarticle} 
\usepackage[utf8]{inputenc}
\usepackage[slovene]{babel}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{float}
\usepackage{biblatex}
\usepackage{listings}
\usepackage{xcolor}

\usepackage[a4paper,
    top=1.5cm,
    bottom=1.5cm,
    left=1.5cm,
    right=1.5cm
]{geometry}

\lstset{
    language=Python,                  % jezik programiranja
    basicstyle=\ttfamily\small,      % osnovni font za kodo
    keywordstyle=\color{blue},       % barva za ključne besede
    stringstyle=\color{red},         % barva za nize
    commentstyle=\color{green!50!black}\itshape, % komentarji
    numbers=left,                    % številke vrstic na levi
    numberstyle=\tiny\color{gray},
    stepnumber=1,
    numbersep=5pt,
    showstringspaces=false,
    breaklines=true,
    frame=single,
    tabsize=4,
    captionpos=b
}


\setlength{\parindent}{0pt}

% Komanda za vrednost z aboslutno napako
\newcommand{\abserr}[5]{
    \ensuremath{#1_{#2} = (#3 \ \pm \ #4) \ #5}
}

\newcommand{\relerr}[5]{
    \ensuremath{#1_{#2} = #3 \ (1 \pm \ #4) \ #5}
}

\newcommand{\relativna}[3]{
    \ensuremath{#1 \ (1 \pm #2) \ #3}
}

\newcommand{\absolutna}[3]{
    \ensuremath{(#1 \ \pm \ #2) \ #3}
}


\title{Optična rotacija raztopine saharoze}
\author{Matija Zanjkovič, Mesarec Tilen, Petauer Maja}
\date{Junij 2025}

\begin{document}
\maketitle

\section*{Uvod}

glukoza : fruktoza = 36 : 41

\pagebreak

\begin{lstlisting}
def drude(lambda_nm, k, A):
return (k * lambda_nm**2) / (lambda_nm**2 - A**2)


# Prileganje z upoštevanjem napak v y (x napake ne vplivajo na fit)
params, cov = curve_fit(drude, lambda_vals, alpha_vals, sigma=alpha_errs, absolute_sigma=True, p0=(1e4, 200))
k_fit, A_fit = params
k_err, A_err = np.sqrt(np.diag(cov))

# Izpis rezultatov
print("Ujemajoči parametri:")
print(f"  k = {k_fit:.2f} ± {k_err:.2f}")
print(f"  A = {A_fit:.2f} ± {A_err:.2f} nm")

# Priprava za prikaz prileganja
lambda_fit = np.linspace(450, 700, 300)
alpha_fit = drude(lambda_fit, k_fit, A_fit)

# Risanje grafa z error bar-i v obeh smereh
plt.figure(figsize=(8, 5))

plt.errorbar(
    lambda_vals,
    alpha_vals,
    xerr=lambda_errs,
    yerr=alpha_errs,
    fmt='o',
    markersize=6,
    markerfacecolor='steelblue',
    markeredgecolor='black',
    ecolor='gray',
    elinewidth=1,
    capsize=4,
    label='Izmerjeni podatki z napako'
)

# Prileganje funkcije
plt.plot(lambda_fit, alpha_fit, color='cornflowerblue', linewidth=2.2, label='Drudejevo prileganje')

# Oznake in estetika
plt.xlabel('Valovna dolžina λ (nm)')
plt.ylabel('Specifična rotacija [α](λ)')
plt.title('Prileganje podatkov Drudejevi enačbi z napakami v x in y')
plt.grid(True, linestyle='--', alpha=0.6)
plt.legend()
plt.tight_layout()
plt.show()
\end{lstlisting}

\end{document}